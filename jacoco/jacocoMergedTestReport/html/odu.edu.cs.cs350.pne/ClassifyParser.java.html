<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ClassifyParser.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Project-CS350</a> &gt; <a href="index.source.html" class="el_package">odu.edu.cs.cs350.pne</a> &gt; <span class="el_source">ClassifyParser.java</span></div><h1>ClassifyParser.java</h1><pre class="source lang-java linenums">package odu.edu.cs.cs350.pne;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import org.apache.pdfbox.pdmodel.PDDocument;
import org.apache.pdfbox.text.PDFTextStripper;


public class ClassifyParser 
{
<span class="fc" id="L13">    private VocabCollection vocab = new VocabCollection();</span>
<span class="fc" id="L14">    boolean idfCalculated = false;</span>

    public ClassifyParser (String vocabPath)
<span class="fc" id="L17">    {</span>
<span class="fc" id="L18">        vocab.readInVocab(vocabPath);</span>
<span class="fc" id="L19">    }</span>
   
    //entry point for document creation
    public ClassifyDocument createAndProcessDocument(String filePath)
    {   
<span class="fc" id="L24">        String text = readFileStandard(filePath);</span>
<span class="fc" id="L25">        ClassifyDocument cDocument = new ClassifyDocument(text);</span>
<span class="fc" id="L26">        cDocument.splitText(vocab);</span>
<span class="fc" id="L27">        cDocument.createTokenMap();</span>
        
<span class="pc bpc" id="L29" title="1 of 2 branches missed.">        if (idfCalculated == false) //only need to calculate idf once</span>
        {
<span class="fc" id="L31">            vocab.calcInverseDocFrequency();</span>
<span class="fc" id="L32">            idfCalculated = true;</span>
        }

<span class="fc" id="L35">        cDocument.calculateTermWeights(vocab);</span>
<span class="fc" id="L36">        return cDocument;</span>
    }

    public String readFileStandard(String filePath)
    {
<span class="fc" id="L41">        String extension = filePath.substring(filePath.length()-3);</span>
        
<span class="fc bfc" id="L43" title="All 2 branches covered.">        if (extension.equals(&quot;pdf&quot;))</span>
        {
            try
            {  
<span class="fc" id="L47">                File file = new File(filePath);   </span>
<span class="fc" id="L48">                PDDocument doc = PDDocument.load(file);  </span>
<span class="fc" id="L49">                String rawText = new PDFTextStripper().getText(doc);</span>

<span class="fc" id="L51">                doc.close();</span>

<span class="fc" id="L53">                return rawText;</span>
            }
<span class="nc" id="L55">            catch (IOException e) </span>
            {
<span class="nc" id="L57">                System.out.println(&quot;Not able to load PDF&quot;);</span>
<span class="nc" id="L58">                e.printStackTrace();</span>
<span class="nc" id="L59">                return &quot;Error&quot;;</span>
            }
        }    
<span class="pc bpc" id="L62" title="1 of 2 branches missed.">        else if (extension.equals(&quot;txt&quot;))</span>
        {
<span class="fc" id="L64">            StringBuilder builder = new StringBuilder();</span>
            
<span class="fc" id="L66">            try (BufferedReader buffer = new BufferedReader(new FileReader(filePath)))</span>
            {   
                String str;

<span class="fc bfc" id="L70" title="All 2 branches covered.">                while ((str = buffer.readLine()) != null)</span>
                {    
<span class="fc" id="L72">                    builder.append(str + &quot; &quot;);</span>
                }
<span class="fc" id="L74">                builder.deleteCharAt(builder.length()-1); //removes space after last line</span>
<span class="fc" id="L75">                return builder.toString();</span>
            }
<span class="nc" id="L77">            catch (IOException e)</span>
            {
<span class="nc" id="L79">                System.out.println(&quot;Not able to load Text File&quot;);</span>
<span class="nc" id="L80">                e.printStackTrace();</span>
<span class="nc" id="L81">                return &quot;Error&quot;;</span>
            }
        }
        else
        {
<span class="nc" id="L86">            System.out.println(&quot;Invalid File Type Extension&quot;);</span>
<span class="nc" id="L87">            return &quot;Invalid&quot;;</span>
        }
    }

    public VocabCollection getVocabCollection()
    {
<span class="fc" id="L93">        return vocab;</span>
    }

    // public String readFileWithTIKA(String filePath)
    // {
    //     AutoDetectParser parser = new AutoDetectParser();
    //     BodyContentHandler handler = new BodyContentHandler();
    //     Metadata metadata = new Metadata();

    //     try (InputStream stream = new FileInputStream(filePath)) {
    //         parser.parse(stream, handler, metadata);
        
    //         return handler.toString();
    //     }

    //     catch (Exception e)
    //     {
    //         System.out.println(&quot;Error Occured&quot;);
    //         e.printStackTrace();
    //         return &quot;&quot;;
    //     }
    // }
}
    

</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>